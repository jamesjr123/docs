<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    
    template="/WEB-INF/templates/template-lay.xhtml">    
    <ui:define name="content">

     <p:panelGrid columns="6" >
      		<f:facet name="header">
            	Update Doctor details
     		</f:facet> 
			<p:column>
                <p:outputLabel for="title" value="Title" />
			</p:column>
			<p:column>			                
                <p:inputText id="title" value="#{docsController.newDoc.title}" maxlength="20"/> 					                       
                <p:message for="title"/>                
			</p:column>     		    
			<p:column>
                <p:outputLabel for="firstName" value="First Name:" />
			</p:column>
			<p:column>			                
                <p:inputText id="firstName" value="#{docsController.newDoc.firstName}" maxlength="60" required="yes"/> 					                       
                <p:message for="firstName"/>                
			</p:column>			
			<p:column>
                <p:outputLabel for="middleName" value="Middle Name:" />
			</p:column>			
			<p:column>			                
                <p:inputText id="middleName" value="#{docsController.newDoc.middleName}" maxlength="60" required="yes"/> 					                       
                <p:message for="middleName"/>                
			</p:column>
			<p:column>
                <p:outputLabel for="surname" value="Last Name:" />
			</p:column>			
			<p:column >			                
                <p:inputText id="surname" value="#{docsController.newDoc.surname}" maxlength="60" required="yes"/> 					                       
                <p:message for="surname"/>                
			</p:column>
			<p:column>
                <p:outputLabel for="category" value="Category:" />
			</p:column>			
			<p:column >			                
                <p:inputText id="category" value="#{docsController.newDoc.category}" /> 					                       
                <p:message for="category"/>                
			</p:column>
			<p:column>
                <p:outputLabel for="quals" value="Qualifications:" />
			</p:column>			
			<p:column >			                
                <p:inputText id="quals" value="#{docsController.newDoc.quals}" maxlength="200" /> 					                       
                <p:message for="quals"/>                
			</p:column>
			<p:column>
                <p:outputLabel for="email" value="Email:" />
			</p:column>			
			<p:column >			                
                <p:inputText id="email" value="#{docsController.newDoc.emailAddress}" maxlength="200" /> 					                       
                <p:message for="email"/>                
			</p:column>
			<p:column>
                <p:outputLabel for="phone" value="Contact Number:" />
			</p:column>			
			<p:column >			                
                <p:inputText id="phone" value="#{docsController.newDoc.phoneNumber}" maxlength="20" /> 					                       
                <p:message for="phone"/>                
			</p:column>			
			<p:column>		
				<p:outputLabel for="Address" value="Address:" />			
			</p:column>
			<p:column>
			<h:outputText id="Address" value="#{docsController.newDoc.location.location.concat(' ').concat(docsController.newDoc.location.mailAddress1).concat(' ').concat(docsController.newDoc.location.mailSuburb)}"/>
			</p:column>
            </p:panelGrid>
                
            <p:panelGrid columns="5">
               <p:column>                
                    <h:commandButton id="save"
                           action="#{docsController.saveDoc()}"
                        value="Save" />
               	</p:column>
				<p:column>                        
                    <h:commandButton id="cancel"
                        action="#{docsController.cancel()}"
                        value="Cancel" immediate="true" />
                 </p:column>                      
				<p:column>                        
					<p:commandButton id="locationBtn" value="Enter Location" type="button" />
                 </p:column>                                                      	
				<p:column>                        
                    <p:messages styleClass="messages"
                       infoClass="valid"
                        warnClass="warning" globalOnly="true" />
                </p:column>
                </p:panelGrid>       
			<p:overlayPanel id="locationPanel" for="locationBtn" hideEffect="fade" dynamic="true" >
			 <p:dataTable  var="_loc" value="#{locations}" rows="10" rendered="#{docsController.docsReadAccess}" sortMode="multiple" 
			         paginator="true" paginatorPosition="bottom"  id="locTable">
			     <p:column width="100" >
			           <f:facet name="header">Select</f:facet>
			           <h:commandLink  value="Select" action="#{docsController.selectLoc(_loc)}" rendered="#{docsController.newDoc.doctorNumber==0}"/>
			           <h:commandLink  value="Replace" action="#{docsController.selectLoc(_loc)}" rendered="#{docsController.newDoc.doctorNumber>0}"/><br/>
			           <h:commandLink  value="Add new" action="#{docsController.addLoc(_loc)}" rendered="#{docsController.newDoc.doctorNumber>0}"/>                                                                          			           
			           
			     </p:column>  			                   
			    <p:column headerText="Location" sortBy="#{_loc.location}"
			         	filterBy="#{_loc.location}" filterMatchMode="contains" filterStyle="width: 150px;">
			        <h:outputText value="#{_loc.location}" />
			    </p:column>
			    <p:column headerText="Address"
			         	filterBy="#{_loc.mailAddress1}" filterMatchMode="contains">
			        <h:outputText value="#{_loc.mailAddress1}" />
			    </p:column>
			
			    <p:column headerText="Suburb" sortBy="#{_loc.mailSuburb} "
			         	filterBy="#{_loc.mailSuburb}" filterMatchMode="contains" filterStyle="width: 150px;">
			        <h:outputText value="#{_loc.mailSuburb}" />
			    </p:column>
			    <p:column  width="95" headerText="State" sortBy="#{_loc.mailState}"
			         	filterBy="#{_loc.mailState}" filterMatchMode="exact" filterStyle="width: 40px;">
			        <h:outputText value="#{_loc.mailState}" />
			    </p:column>  
			    <p:column width="105"  headerText="PostCode" sortBy="#{_loc.mailPostcode}"
			         	filterBy="#{_loc.mailPostcode}" filterMatchMode="contains" filterStyle="width: 40px;">
			        <h:outputText value="#{_loc.mailPostcode}" />
			    </p:column>                          

			
			</p:dataTable>			
			
			</p:overlayPanel>


    </ui:define>
</ui:composition>
